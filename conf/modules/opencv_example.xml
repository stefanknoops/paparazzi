<!DOCTYPE module SYSTEM "module.dtd">

<module name="opencv_example" dir="computer_vision">
  <doc>
    <description>Example of how opencv can be used he bebop drone</description>
  	<define name="OPENCVDEMO_CAMERA" value="front_camera|bottom_camera" description="Video device to use"/>
  	<define name="OPENCVDEMO_FPS" value="0" description="The (maximum) frequency to run the calculations at. If zero, it will max out at the camera frame rate"/>
  </doc>
  <header>
    <file name="opencv_example.h"/>
  </header>
  <init fun="opencvdemo_init()"/>
  <makefile>
    <file name="opencv_example.c"/>
    <file name="TimeToContact.cpp"/>
    <include name="modules/computer_vision"/>
    <file name="image.c" dir="modules/computer_vision/lib/vision"/>
    <file name="jpeg.c" dir="modules/computer_vision/lib/encoding"/>
    <file name="rtp.c" dir="modules/computer_vision/lib/encoding"/>
    <file name="v4l2.c" dir="modules/computer_vision/lib/v4l"/>

    <!-- The optical flow module (calculator) -->
    <file name="linear_flow_fit.c" dir="modules/computer_vision/opticflow"/>
    <file name="pprz_algebra_float.c" dir="math"/>
    <file name="pprz_matrix_decomp_float.c" dir="math"/>
    
   	    <flag name="CFLAGS" value="I$(PAPARAZZI_SRC)/sw/ext/opencv_bebop/install_pc/include"/>
	    <flag name="LDFLAGS" value="L$(PAPARAZZI_HOME)/sw/ext/opencv_bebop/install_pc/lib"/>
		<flag name="LDFLAGS" value="lopencv_world"/>
		<flag name="LDFLAGS" value="L$(PAPARAZZI_HOME)/sw/ext/opencv_bebop/install_pc/share/OpenCV/3rdparty/lib"/>
		<flag name="LDFLAGS" value="llibprotobuf"/>
		<flag name="LDFLAGS" value="lquirc"/>
		<flag name="LDFLAGS" value="L/usr/lib/x86_64-linux-gnu"/>
		<flag name="LDFLAGS" value="ljpeg"/>
		<flag name="LDFLAGS" value="lpng"/>
		<flag name="LDFLAGS" value="ltiff"/>
		<flag name="LDFLAGS" value="lz"/>
		<flag name="LDFLAGS" value="ldl"/>
		<flag name="LDFLAGS" value="lm"/>
		<flag name="LDFLAGS" value="lpthread"/>
		<flag name="LDFLAGS" value="lrt"/>  
  </makefile>
</module>

